!function e(n,t,o){function a(i,s){if(!t[i]){if(!n[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var m=t[i]={exports:{}};n[i][0].call(m.exports,function(e){var t=n[i][1][e];return a(t?t:e)},m,m.exports,e,n,t,o)}return t[i].exports}for(var r="function"==typeof require&&require,i=0;i<o.length;i++)a(o[i]);return a}({1:[function(e,n,t){"use strict";function o(){function e(){n=window.innerWidth,t=window.innerHeight,r&&(r.setSize(n,t),r.setViewport(0,0,n,t),s.aspect=n/t,s.updateProjectionMatrix())}var n,t;n=window.innerWidth,t=window.innerHeight;var o=Math.min(1.5,window.devicePixelRatio),r=new THREE.WebGLRenderer({canvas:document.getElementById("canvas"),antialias:!0});r.setClearColor(15658734,1),r.setSize(n,t),r.setPixelRatio(o);var i=new THREE.Scene,s=new THREE.PerspectiveCamera(55,n/t,1,1e4);s.position.set(0,1,-3),s.lookAt(new THREE.Vector3);var c=new a(s);return window.addEventListener("resize",e),{renderer:r,scene:i,controls:c,camera:s}}var a=e("three-orbit-controls")(THREE);n.exports=o},{"three-orbit-controls":4}],2:[function(e,n,t){"use strict";function o(){b.position.y=0,b.position.x=0,b.position.z=-150,b.lookAt(new THREE.Vector3),a(),r()}function a(){u=new GPUComputationRenderer(C,C,E);var e=u.createTexture(),n=u.createTexture();i(e,n),p=u.addVariable("textureVelocity",O,n),d=u.addVariable("texturePosition",T,e),u.setVariableDependencies(p,[d,p]),u.setVariableDependencies(d,[d,p]),v=d.material.uniforms,h=p.material.uniforms,d.material.uniforms.time={value:0},p.material.uniforms.time={value:0},p.material.uniforms.t1={value:V.t1},p.material.uniforms.t2={value:V.t2},u.init()}function r(){m=new THREE.BufferGeometry;var e=new Float32Array(3*M);console.log("aaaaa",e.length);for(var n=0;n<3*M;n+=9)e[n+0]=1*Math.random(),e[n+1]=1*Math.random(),e[n+2]=1*Math.random(),e[n+3]=1*Math.random(),e[n+4]=1*Math.random(),e[n+5]=1*Math.random(),e[n+6]=1*Math.random(),e[n+7]=1*Math.random(),e[n+8]=1*Math.random();for(var t=new Float32Array(2*M),o=0,a=0;a<C;a++)for(var n=0;n<C;n++)t[o++]=n/(C-1),t[o++]=a/(C-1);m.addAttribute("position",new THREE.BufferAttribute(e,3)),m.addAttribute("uv",new THREE.BufferAttribute(t,2)),x={texturePosition:{value:null},textureVelocity:{value:null},cameraConstant:{value:s(b)}};var r=new THREE.ShaderMaterial({uniforms:x,vertexShader:P,fragmentShader:z,side:THREE.DoubleSide,transparent:!0});r.extensions.drawBuffers=!0;var i=new THREE.Mesh(m,r);i.matrixAutoUpdate=!1,i.updateMatrix(),g.add(i)}function i(e,n){var t=e.image.data,o=n.image.data;console.log("pos",t.length),console.log("vel",o.length);for(var a=0,r=t.length;a<r;a+=12){var i=200*Math.random()-100,s=200*Math.random()-100,c=200*Math.random()-100,l=10*Math.random();t[a+0]=i,t[a+1]=s,t[a+2]=c,t[a+3]=l,t[a+4]=i,t[a+5]=s,t[a+6]=c,t[a+7]=l,t[a+8]=i,t[a+9]=s,t[a+10]=c,t[a+11]=l;var m=.1,u=0,p=0;l=.5+.5*Math.random(),o[a+0]=m,o[a+1]=u,o[a+2]=p,o[a+3]=l,o[a+4]=m,o[a+5]=u,o[a+6]=p,o[a+7]=l,o[a+8]=m,o[a+9]=u,o[a+10]=p,o[a+11]=l}}function s(e){return window.innerHeight/(Math.tan(.5*THREE.Math.DEG2RAD*e.fov)/e.zoom)}function c(){requestAnimationFrame(c),l()}function l(){u.compute(),p.material.uniforms.time.value+=1/60,V.t1+=(j-V.t1)/2e3,V.t2+=(L-V.t2)/2e3,p.material.uniforms.t1.value=V.t1,p.material.uniforms.t2.value=V.t2,R+=1,R>120&&(R=0,j=1+10*Math.random(),L=1+10*Math.random()),x.texturePosition.value=u.getCurrentRenderTarget(d).texture,x.textureVelocity.value=u.getCurrentRenderTarget(p).texture,E.render(g,b)}var m,u,p,d,v,h,x,f=e("./lib/createThree"),y=f(),b=y.camera,g=y.scene,E=y.renderer,w=(y.controls,e("glslify")),z=w(["#define GLSLIFY 1\n// VertexShaderから受け取った色を格納するだけ。\nvarying vec4 vColor;\nvarying vec2 vUv;\nvoid main() {\n\n    // 丸い形に色をぬるための計算\n//    float f = length( gl_PointCoord - vec2( 0.5, 0.5 ) );\n//    if ( f > 0.1 ) {\n//        discard;\n//    }\n\n    vUv;\n\n    gl_FragColor = vColor;\n\n}"]),P=w(["#define GLSLIFY 1\n#include <common>\n\nuniform sampler2D texturePosition;\nuniform float cameraConstant;\nuniform float density;\nvarying vec4 vColor;\nvarying vec2 vUv;\nuniform float radius;\n\nvoid main() {\n\n    vec4 posTemp = texture2D( texturePosition, uv );\n    vec3 pos = posTemp.xyz;\n    vColor = vec4( 63.0/255.0, 81.0/255.0, 100.0/255.0, 0.7 );\n\n    pos += position;\n\n    // ポイントのサイズを決定\n    vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n    //gl_PointSize = 16.0;//0.5 * cameraConstant / ( - mvPosition.z );\n\n    // uv情報の引き渡し\n    vUv = uv;\n\n    // 変換して格納\n    gl_Position = projectionMatrix * mvPosition;\n\n}"]),T=w(["#define GLSLIFY 1\n#define delta ( 1.0 / 60.0 )\n#define area 50.0\n\nvoid main() {\n\n  vec2 uv = gl_FragCoord.xy / resolution.xy;\n  vec4 tmpPos = texture2D( texturePosition, uv );\n  vec4 tmpVel = texture2D( textureVelocity, uv );\n\n  vec3 pos = tmpPos.xyz;\n  vec3 vel = tmpVel.xyz;\n\n  // Dynamics\n  pos += vel;// * delta;\n\n  pos.x>area?pos=vec3(pos.x-area*2.0, pos.y         , pos.z         ):vec3(0.0);\n  pos.y>area?pos=vec3(pos.x         , pos.y-area*2.0, pos.z         ):vec3(0.0);\n  pos.z>area?pos=vec3(pos.x         , pos.y         , pos.z-area*2.0):vec3(0.0);\n\n  pos.x<-area?pos=vec3(pos.x+area*2.0, pos.y         , pos.z         ):vec3(0.0);\n  pos.y<-area?pos=vec3(pos.x         , pos.y+area*2.0, pos.z         ):vec3(0.0);\n  pos.z<-area?pos=vec3(pos.x         , pos.y         , pos.z+area*2.0):vec3(0.0);\n\n//  pos.x>area?pos=vec3(pos.x-area*1.0, pos.y         , pos.z     ):vec3(0.0);\n//  pos.y>area?pos=vec3(pos.x         , pos.y-area*1.0, pos.z     ):vec3(0.0);\n//  pos.z>area?pos=vec3(pos.x         , pos.y         , pos.z-area):vec3(0.0);\n//\n//  pos.x<-area?pos=vec3(pos.x+area*1.0, pos.y         , pos.z     ):vec3(0.0);\n//  pos.y<-area?pos=vec3(pos.x         , pos.y+area*1.0, pos.z     ):vec3(0.0);\n//  pos.z<-area?pos=vec3(pos.x         , pos.y         , pos.z+area*1.0):vec3(0.0);\n\n  gl_FragColor = vec4( pos, tmpPos.w );\n\n}"]),O=w(["#define GLSLIFY 1\n// For PI declaration:\n#include <common>\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i);\n  vec4 p = permute( permute( permute(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\nuniform float time;\nuniform float t1;\nuniform float t2;\n\nfloat maxspeed = 5.0;\nfloat maxforce = 0.5;\n\nfloat speed = 0.4;\n\nfloat magSq(vec3 vec) {\n  return (vec.x*vec.x + vec.y*vec.y + vec.z*vec.z);\n}\n\nvec3 limit(vec3 vec, float max) {\n  if (magSq(vec) > max*max) {\n    vec = normalize(vec);\n    vec *= max;\n  }\n  return vec;\n}\n\nvoid main() {\n\n    vec2 uv = gl_FragCoord.xy / resolution.xy;\n\n    float idParticle = uv.y * resolution.x + uv.x;\n\n    vec4 tmpVel = texture2D( textureVelocity, uv );\n    vec4 tmpPos = texture2D( texturePosition, uv );\n\n//    vec3 vel = tmpVel.xyz;\n    vec3 vel = vec3(tmpVel.zzw) * speed;\n\n    speed += sin(time)*0.3;\n\n    //vec3 vel = tmpVel.xyz * snoise(tmpPos.xyz)*1.0;\n\n//    vec3 central = vec3( 0., 0., 0. );\n//\t\tvec3 dir = tmpPos.xyz - central;\n\n    float theta = snoise( tmpPos.xyz * 0.038 )*6.28;\n    vel += vec3( cos(theta), sin(theta), 0.0 ) * speed;\n\n//    if ( length( vel ) > 200.0 ) {\n//\t\t\t\tvel = normalize( vel ) * 100.0;\n//\t\t}\n\n//    vec3 target = vec3( 100.*cos(t1*time+tmpVel.w*6.28), 100.*sin(t2*time+tmpVel.w*6.28), tmpPos.w*2.0-1.0);\n//    vec3 target = vec3( 100.*cos(time+tmpVel.w*6.28), 100.*sin(time+tmpVel.w*6.28), tmpPos.w*0.2-0.1);\n\n//    target += tmpVel.www * 0.00001;\n//    maxspeed += tmpPos.w * tmpVel.w *0.002;\n//    maxforce += tmpPos.w * tmpVel.w *0.1;\n\n//    vec3 desired = target - tmpPos.xyz;\n//    desired = normalize(desired) * maxspeed;\n//    vec3 vel = desired - vec3(0.1,0.1,0.1);\n\n//    vel *= 3.0;\n\n//    vel -= normalize( dir )*0.1;\n//        vel *= vec3(\n//          snoise(tmpPos.xxx),\n//          snoise(tmpPos.yyy),\n//          snoise(tmpPos.zzz)\n//        )*2.0;\n\n//    vel = limit(vel, maxforce);\n\n//    vel += vec3(\n//      snoise(tmpPos.xxx),\n//      snoise(tmpPos.yyy),\n//      snoise(tmpPos.zzz)\n//    )*1.0;\n\n    gl_FragColor = vec4( vel.xyz, tmpVel.w );\n}"]),C=1024,M=C*C,R=0,j=1,L=1,V={t1:3,t2:2};o(),c()},{"./lib/createThree":1,glslify:3}],3:[function(e,n,t){n.exports=function(e){"string"==typeof e&&(e=[e]);for(var n=[].slice.call(arguments,1),t=[],o=0;o<e.length-1;o++)t.push(e[o],n[o]||"");return t.push(e[o]),t.join("")}},{}],4:[function(e,n,t){n.exports=function(e){function n(n,t){function o(){return 2*Math.PI/60/60*D.autoRotateSpeed}function a(){return Math.pow(.95,D.zoomSpeed)}function r(e){Y.theta-=e}function i(e){Y.phi-=e}function s(n){D.object instanceof e.PerspectiveCamera?_/=n:D.object instanceof e.OrthographicCamera?(D.object.zoom=Math.max(D.minZoom,Math.min(D.maxZoom,D.object.zoom*n)),D.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),D.enableZoom=!1)}function c(n){D.object instanceof e.PerspectiveCamera?_*=n:D.object instanceof e.OrthographicCamera?(D.object.zoom=Math.max(D.minZoom,Math.min(D.maxZoom,D.object.zoom/n)),D.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),D.enableZoom=!1)}function l(e){q.set(e.clientX,e.clientY)}function m(e){J.set(e.clientX,e.clientY)}function u(e){K.set(e.clientX,e.clientY)}function p(e){X.set(e.clientX,e.clientY),B.subVectors(X,q);var n=D.domElement===document?D.domElement.body:D.domElement;r(2*Math.PI*B.x/n.clientWidth*D.rotateSpeed),i(2*Math.PI*B.y/n.clientHeight*D.rotateSpeed),q.copy(X),D.update()}function d(e){$.set(e.clientX,e.clientY),ee.subVectors($,J),ee.y>0?s(a()):ee.y<0&&c(a()),J.copy($),D.update()}function v(e){W.set(e.clientX,e.clientY),Q.subVectors(W,K),oe(Q.x,Q.y),K.copy(W),D.update()}function h(e){}function x(e){e.deltaY<0?c(a()):e.deltaY>0&&s(a()),D.update()}function f(e){switch(e.keyCode){case D.keys.UP:oe(0,D.keyPanSpeed),D.update();break;case D.keys.BOTTOM:oe(0,-D.keyPanSpeed),D.update();break;case D.keys.LEFT:oe(D.keyPanSpeed,0),D.update();break;case D.keys.RIGHT:oe(-D.keyPanSpeed,0),D.update()}}function y(e){q.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){var n=e.touches[0].pageX-e.touches[1].pageX,t=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(n*n+t*t);J.set(0,o)}function g(e){K.set(e.touches[0].pageX,e.touches[0].pageY)}function E(e){X.set(e.touches[0].pageX,e.touches[0].pageY),B.subVectors(X,q);var n=D.domElement===document?D.domElement.body:D.domElement;r(2*Math.PI*B.x/n.clientWidth*D.rotateSpeed),i(2*Math.PI*B.y/n.clientHeight*D.rotateSpeed),q.copy(X),D.update()}function w(e){var n=e.touches[0].pageX-e.touches[1].pageX,t=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(n*n+t*t);$.set(0,o),ee.subVectors($,J),ee.y>0?c(a()):ee.y<0&&s(a()),J.copy($),D.update()}function z(e){W.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(W,K),oe(Q.x,Q.y),K.copy(W),D.update()}function P(e){}function T(e){if(D.enabled!==!1){if(e.preventDefault(),e.button===D.mouseButtons.ORBIT){if(D.enableRotate===!1)return;l(e),F=U.ROTATE}else if(e.button===D.mouseButtons.ZOOM){if(D.enableZoom===!1)return;m(e),F=U.DOLLY}else if(e.button===D.mouseButtons.PAN){if(D.enablePan===!1)return;u(e),F=U.PAN}F!==U.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",C,!1),D.dispatchEvent(S))}}function O(e){if(D.enabled!==!1)if(e.preventDefault(),F===U.ROTATE){if(D.enableRotate===!1)return;p(e)}else if(F===U.DOLLY){if(D.enableZoom===!1)return;d(e)}else if(F===U.PAN){if(D.enablePan===!1)return;v(e)}}function C(e){D.enabled!==!1&&(h(e),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",C,!1),D.dispatchEvent(N),F=U.NONE)}function M(e){D.enabled===!1||D.enableZoom===!1||F!==U.NONE&&F!==U.ROTATE||(e.preventDefault(),e.stopPropagation(),x(e),D.dispatchEvent(S),D.dispatchEvent(N))}function R(e){D.enabled!==!1&&D.enableKeys!==!1&&D.enablePan!==!1&&f(e)}function j(e){if(D.enabled!==!1){switch(e.touches.length){case 1:if(D.enableRotate===!1)return;y(e),F=U.TOUCH_ROTATE;break;case 2:if(D.enableZoom===!1)return;b(e),F=U.TOUCH_DOLLY;break;case 3:if(D.enablePan===!1)return;g(e),F=U.TOUCH_PAN;break;default:F=U.NONE}F!==U.NONE&&D.dispatchEvent(S)}}function L(e){if(D.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(D.enableRotate===!1)return;if(F!==U.TOUCH_ROTATE)return;E(e);break;case 2:if(D.enableZoom===!1)return;if(F!==U.TOUCH_DOLLY)return;w(e);break;case 3:if(D.enablePan===!1)return;if(F!==U.TOUCH_PAN)return;z(e);break;default:F=U.NONE}}function V(e){D.enabled!==!1&&(P(e),D.dispatchEvent(N),F=U.NONE)}function A(e){e.preventDefault()}this.object=n,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e.MOUSE.LEFT,ZOOM:e.MOUSE.MIDDLE,PAN:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return I.phi},this.getAzimuthalAngle=function(){return I.theta},this.reset=function(){D.target.copy(D.target0),D.object.position.copy(D.position0),D.object.zoom=D.zoom0,D.object.updateProjectionMatrix(),D.dispatchEvent(H),D.update(),F=U.NONE},this.update=function(){var t=new e.Vector3,a=(new e.Quaternion).setFromUnitVectors(n.up,new e.Vector3(0,1,0)),i=a.clone().inverse(),s=new e.Vector3,c=new e.Quaternion;return function(){var e=D.object.position;return t.copy(e).sub(D.target),t.applyQuaternion(a),I.setFromVector3(t),D.autoRotate&&F===U.NONE&&r(o()),I.theta+=Y.theta,I.phi+=Y.phi,I.theta=Math.max(D.minAzimuthAngle,Math.min(D.maxAzimuthAngle,I.theta)),I.phi=Math.max(D.minPolarAngle,Math.min(D.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=_,I.radius=Math.max(D.minDistance,Math.min(D.maxDistance,I.radius)),D.target.add(Z),t.setFromSpherical(I),t.applyQuaternion(i),e.copy(D.target).add(t),D.object.lookAt(D.target),D.enableDamping===!0?(Y.theta*=1-D.dampingFactor,Y.phi*=1-D.dampingFactor):Y.set(0,0,0),_=1,Z.set(0,0,0),!!(G||s.distanceToSquared(D.object.position)>k||8*(1-c.dot(D.object.quaternion))>k)&&(D.dispatchEvent(H),s.copy(D.object.position),c.copy(D.object.quaternion),G=!1,!0)}}(),this.dispose=function(){D.domElement.removeEventListener("contextmenu",A,!1),D.domElement.removeEventListener("mousedown",T,!1),D.domElement.removeEventListener("wheel",M,!1),D.domElement.removeEventListener("touchstart",j,!1),D.domElement.removeEventListener("touchend",V,!1),D.domElement.removeEventListener("touchmove",L,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",C,!1),window.removeEventListener("keydown",R,!1)};var D=this,H={type:"change"},S={type:"start"},N={type:"end"},U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},F=U.NONE,k=1e-6,I=new e.Spherical,Y=new e.Spherical,_=1,Z=new e.Vector3,G=!1,q=new e.Vector2,X=new e.Vector2,B=new e.Vector2,K=new e.Vector2,W=new e.Vector2,Q=new e.Vector2,J=new e.Vector2,$=new e.Vector2,ee=new e.Vector2,ne=function(){var n=new e.Vector3;return function(e,t){n.setFromMatrixColumn(t,0),n.multiplyScalar(-e),Z.add(n)}}(),te=function(){var n=new e.Vector3;return function(e,t){n.setFromMatrixColumn(t,1),n.multiplyScalar(e),Z.add(n)}}(),oe=function(){var n=new e.Vector3;return function(t,o){var a=D.domElement===document?D.domElement.body:D.domElement;if(D.object instanceof e.PerspectiveCamera){var r=D.object.position;n.copy(r).sub(D.target);var i=n.length();i*=Math.tan(D.object.fov/2*Math.PI/180),ne(2*t*i/a.clientHeight,D.object.matrix),te(2*o*i/a.clientHeight,D.object.matrix)}else D.object instanceof e.OrthographicCamera?(ne(t*(D.object.right-D.object.left)/D.object.zoom/a.clientWidth,D.object.matrix),te(o*(D.object.top-D.object.bottom)/D.object.zoom/a.clientHeight,D.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),D.enablePan=!1)}}();D.domElement.addEventListener("contextmenu",A,!1),D.domElement.addEventListener("mousedown",T,!1),D.domElement.addEventListener("wheel",M,!1),D.domElement.addEventListener("touchstart",j,!1),D.domElement.addEventListener("touchend",V,!1),D.domElement.addEventListener("touchmove",L,!1),window.addEventListener("keydown",R,!1),this.update()}return n.prototype=Object.create(e.EventDispatcher.prototype),n.prototype.constructor=n,Object.defineProperties(n.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),n}},{}]},{},[2]);
